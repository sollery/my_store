{% extends "_base.html" %}
{% load static %}
{% block title %}Ваша корзина{% endblock %}
{% block content %}
<h1 class = "title-page">Ваша корзина покупок</h1>
{% csrf_token %}
<div class="cart_wrp">
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Товар</th>
                <th scope="col">Кол-во</th>
                <th scope="col" >Цена товара</th>
                <th scope="col" >Сумма</th>
                <th scope="col" >удалить</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart %}
            {% with product=item.product %}
            <tr class = 'product' id="{{product.id}}p">
                    <td class ='info-cart'><a class ="text-decoration-none" href="{% url 'product_detail' product.pk product.slug %}">{{ product.name }}</a>
                        {% for image_item in product.productimage_set.all %}
                    <div class="product-image-cart">
                        <img src="{{ image_item.image.url }}" class="img-responsive" height="30" width="50">
                    </div>
                        {% endfor %}
                    </td>
                        <td id="quantity">
                            <button class="change minus" data-product_id = "{{ product.id }}"
                                data-change = "minus" >-</button>
                            <span id = "quantity{{product.id}}">{{ item.quantity }}</span>
                            <button class="change plus" data-product_id = "{{ product.id }}"
                                data-change = "plus" >+</button>
                        </td>
                    <td id = "item_price{{product.id}}">{{ item.price }} руб.</td>
                    <td id ="total_price{{product.id}}">{{ item.total_price }} руб.</td>
                    <td> <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"  viewBox="0 0 16 16" class="change bi bi-trash del" data-product_id = "{{ product.id }}" data-change = "del">>
  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
</svg>
                    </td>
            </tr>
            {% endwith %}
            {% endfor %}
        </tbody>
    </table>
    <div class="t_cart">
        <h3>Сумма заказа:</h3>
        <h3><span class = 'total_sum'>{{ cart.get_total_price }}</span> руб.</h3>
     </div>
    <a href="{%url 'order_create'%}" class="cart_but_zakaz">Оформить заказ</a>
</div>
{% endblock %}

